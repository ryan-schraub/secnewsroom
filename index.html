<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEC Security Master | Ryan Schraub</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">

    <style>
        body { background-color: #f8f9fa; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .container { max-width: 1200px; margin-top: 50px; }
        .header-section { margin-bottom: 30px; text-align: center; }
        .card { border: none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .table thead { background-color: #0d6efd; color: white; }
        .badge-ticker { font-family: monospace; font-weight: bold; background: #e9ecef; color: #0d6efd; padding: 4px 8px; border-radius: 4px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-section">
        <h1 class="display-5 fw-bold text-dark">ðŸ“Š SEC Security Master</h1>
        <p class="lead text-muted">Daily Automated Ticker & CIK Tracking</p>
        <span class="badge bg-success">Live Status: Updated Daily</span>
    </div>

    <div class="card p-4">
        <table id="securityMaster" class="table table-hover responsive nowrap" style="width:100%">
            <thead>
                <tr>
                    <th>Ticker</th>
                    <th>CIK</th>
                    <th>Company Name</th>
                    <th>Last Event</th>
                    <th>Date Detected</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <footer class="mt-5 mb-4 text-center text-muted small">
        <p>Maintained by RyanSchraub &bull; Data Source: SEC.gov</p>
    </footer>
</div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<script>
    $(document).ready(function() {
        // Path to your CSV file (stored in the same GitHub repo)
        const csvUrl = "tickers_preview.csv";

        Papa.parse(csvUrl, {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function(results) {
                $('#securityMaster').DataTable({
                    data: results.data,
                    responsive: true,
                    pageLength: 25,
                    order: [[0, 'asc']], // Sort by Ticker A-Z
                    columns: [
                        { 
                            data: "Ticker",
                            render: function(data) { return `<span class="badge-ticker">${data}</span>`; }
                        },
                        { data: "CIK" },
                        { data: "Name" },
                        { 
                            data: "Last Event",
                            render: function(data) {
                                if (!data || data === "-") return `<span class="text-muted">-</span>`;
                                if (data.includes("TICKER_CHANGE")) return `<span class="badge bg-warning text-dark">${data}</span>`;
                                return `<span class="badge bg-info text-dark">${data}</span>`;
                            }
                        },
                        { data: "Date Detected" }
                    ],
                    language: {
                        searchPlaceholder: "Search ticker or name...",
                        search: ""
                    }
                });
            }
        });
    });
</script>

</body>
</html>
