<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SEC Financial Filing Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <style>
        body { font-family: -apple-system, sans-serif; margin: 30px; background: #f0f2f5; color: #1c1e21; }
        .wrapper { max-width: 1300px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 30px rgba(0,0,0,0.1); }
        h1 { color: #003366; border-bottom: 2px solid #003366; padding-bottom: 10px; }
        #search { width: 100%; padding: 15px; margin: 20px 0; border: 1px solid #ccd0d5; border-radius: 8px; font-size: 18px; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #003366; color: white; padding: 15px; text-align: left; }
        td { padding: 12px; border-bottom: 1px solid #ebedf0; }
        .btn { text-decoration: none; color: white; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: bold; }
        .btn-k { background: #1a73e8; }
        .btn-q { background: #8e44ad; }
        .date { font-family: monospace; color: #555; font-size: 14px; }
    </style>
</head>
<body>
    <div class="wrapper">
        <h1>SEC Filer Matrix</h1>
        <input type="text" id="search" placeholder="Type a Ticker or Company Name..." onkeyup="runSearch()">
        <table id="filingTable">
            <thead>
                <tr>
                    <th>Ticker</th>
                    <th>Company Name</th>
                    <th>Latest 10-K</th>
                    <th>10-K Doc</th>
                    <th>Latest 10-Q</th>
                    <th>10-Q Doc</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        async function init() {
            const response = await fetch('tickers_preview.csv');
            const csv = await response.text();
            Papa.parse(csv, {
                header: true,
                skipEmptyLines: true,
                complete: (results) => {
                    const tbody = document.querySelector('#filingTable tbody');
                    results.data.forEach(row => {
                        const tr = document.createElement('tr');
                        const kLink = row['10-K Link'] ? `<a class="btn btn-k" href="${row['10-K Link']}" target="_blank">10-K</a>` : '—';
                        const qLink = row['10-Q Link'] ? `<a class="btn btn-q" href="${row['10-Q Link']}" target="_blank">10-Q</a>` : '—';
                        
                        tr.innerHTML = `
                            <td><strong>${row.Ticker}</strong></td>
                            <td>${row.Company}</td>
                            <td class="date">${row['Latest 10-K']}</td>
                            <td>${kLink}</td>
                            <td class="date">${row['Latest 10-Q']}</td>
                            <td>${qLink}</td>
                        `;
                        tbody.appendChild(tr);
                    });
                }
            });
        }
        function runSearch() {
            const query = document.getElementById('search').value.toUpperCase();
            document.querySelectorAll('#filingTable tbody tr').forEach(row => {
                row.style.display = row.innerText.toUpperCase().includes(query) ? '' : 'none';
            });
        }
        init();
    </script>
</body>
</html>
